var CjLibAdminFactory = {};

(function($){
	CjLibAdminFactory.init_countries = function(){
		$('input[name="country_name"]').change(function(){
			var id = $(this).closest('tr').find('input[name="cid[]"]').val();
			var name = $(this).val();
			$(this).after($('#progress-confirm').show());
			
			$.ajax({
				url: $('#url-save-country-name').text(),
				dataType: 'json',
				type: 'post',
				data: {'id': id, 'country_name': name},
				success: function(data){
					if(typeof data.error != 'undefined' && data.error.length > 0){
						alert(data.error);
					}
					$('#progress-confirm').hide();
				}
			});
		});
	};
})(jQuery);

jQuery(document).ready(function($){
	$('body').on('mouseover', '.tooltip-hover', function(){$(this).tooltip('show');});
	
	var pageid = $('#cjlib_page_id').val();
	if(pageid == 'countries') CjLibAdminFactory.init_countries();
});